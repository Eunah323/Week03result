<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>일기 엿보기</title>
    <script>
        $(document).ready(function(){
            let getLink = window.location.search;
            let id = decodeURI(getLink.split('?')[1])
            eachPage(id)
        })


        function eachPage(id) {
            $('#diarypage').empty();
            console.log(id);
            $.ajax({
                type: "GET",
                url: `/api/diaries/${id}`,
                success: function (response) {
                    let diary = response;
                    let id = diary.id;
                    let title = diary.title;
                    let nickname = diary.nickname;
                    let username = diary.username;
                    let contents = diary.contents;
                    let modifiedAt = diary.modifiedAt;

                    addHTML(id, title, nickname, username, contents, modifiedAt);
                }
            })

            console.log('모두의일기 개별페이지입니다.');
        }

        function addHTML(id, title, nickname, username, contents, modifiedAt) {
            let temphtml = `     <div class="col">
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="diary-num" id="${id}">No.${id}</h5>
                    <p class="mycomment" ${id}-username>고유번호 : ${username}</p>
                    <p onclick="location.href='/detail.html?${id}'" id="${id}-title">제목 : ${title}</p>
                    <p class="mycomment" id="${id}-nickname">${nickname} 이(가) 씀.</p>
                    <p class="mycomment" id="${id}-contents">${contents}</p>
                    <p class="time">${modifiedAt}</p>

                </div>
            </div>
        </div>`;
            $('#diarypage').append(temphtml);
        }


    </script>
</head>
<body>
<div id="diarypage">
detail페이지입니다.
</div>
</body>
</html>